<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Products</title>
</h:head>

<h:body>

<!--    <ui:include src="/includes/navbar.xhtml" />-->

    <h:form id="searchForm">
        <p:inputText value="#{productBean.searchTerm}" placeholder="Search products..." />
        <p:commandButton value="Search" actionListener="#{productBean.search}" update="productGrid" />
    </h:form>

    <p:dataGrid id="productGrid" value="#{productBean.products}" var="p" columns="4" layout="grid" styleClass="ui-g">
        <p:panel header="#{p.label}" style="text-align:center; margin:10px; display: flex; flex-direction: column; justify-content: center">
            <h:panelGroup layout="block" style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%;">

            <h:panelGroup>
                <h:graphicImage value="/uploads/#{p.image}" rendered="#{not empty p.image}" style="width:150px; height:150px;" />
                <h:outputText value="No Image" rendered="#{empty p.image}" />
            </h:panelGroup>

            <h:outputText value="Price: $#{p.price}" /><br/>

            <h:outputText value="In Stock" style="color:green;" rendered="#{p.inventoryQty gt 0}" />
            <h:outputText value="Out of Stock" style="color:red;" rendered="#{p.inventoryQty le 0}" />

            <p:commandButton value="View"
                             action="productDetails?faces-redirect=true">
                <f:setPropertyActionListener target="#{productBean.selectedProduct}" value="#{p}" />
            </p:commandButton>
            </h:panelGroup>

        </p:panel>
    </p:dataGrid>

</h:body>
</html>
